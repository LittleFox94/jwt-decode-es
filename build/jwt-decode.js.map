{"version":3,"file":"jwt-decode.js","sources":["../lib/errors.mjs","../lib/atob.mjs","../lib/base64_url_decode.mjs","../lib/index.mjs"],"sourcesContent":["export function InvalidTokenError(message) {\r\n  this.message = message;\r\n}\r\n\r\nInvalidTokenError.prototype = new Error();\r\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\r\n\r\nexport function InvalidCharacterError(message) {\r\n  this.message = message;\r\n}\r\n\r\nInvalidCharacterError.prototype = new Error();\r\nInvalidCharacterError.prototype.name = \"InvalidCharacterError\";\r\n","/**\r\n * The code was extracted from:\r\n * https://github.com/davidchambers/Base64.js\r\n * and slightly modified by enthusiasts\r\n */\r\n\r\nimport { InvalidCharacterError } from \"./errors\";\r\n\r\nconst chars =\r\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n/**\r\n * atob polyfill, if window.atob is not available\r\n * @param {string} input\r\n */\r\nfunction polyfill(input) {\r\n  const str = String(input).replace(/=+$/, \"\");\r\n  if (str.length % 4 == 1) {\r\n    throw new InvalidCharacterError(\r\n      \"'atob' failed: The string to be decoded is not correctly encoded.\"\r\n    );\r\n  }\r\n  for (\r\n    // initialize result and counters\r\n    var bc = 0, bs, buffer, idx = 0, output = \"\";\r\n    // get next character\r\n    (buffer = str.charAt(idx++));\r\n    // character found in table? initialize bit storage and add its ascii value;\r\n    ~buffer &&\r\n    ((bs = bc % 4 ? bs * 64 + buffer : buffer),\r\n    // and if not first of each 4 characters,\r\n    // convert the first 8 bits to one ascii character\r\n    bc++ % 4)\r\n      ? (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6))))\r\n      : 0\r\n  ) {\r\n    // try to find character in table (0-63, not found => -1)\r\n    buffer = chars.indexOf(buffer);\r\n  }\r\n  return output;\r\n}\r\n\r\nexport default (typeof window !== \"undefined\" &&\r\n  window.atob &&\r\n  window.atob.bind(window)) ||\r\n  polyfill;\r\n","import atob from \"./atob\";\r\n\r\nfunction b64DecodeUnicode(str) {\r\n  // Going backwards: from bytestream, to percent-encoding, to original string.\r\n  return decodeURIComponent(\r\n    atob(str)\r\n      .split(\"\")\r\n      .map(function (c) {\r\n        return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\r\n      })\r\n      .join(\"\")\r\n  );\r\n}\r\n\r\nexport default function (str) {\r\n  let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n  switch (output.length % 4) {\r\n    case 0:\r\n      break;\r\n    case 2:\r\n      output += \"==\";\r\n      break;\r\n    case 3:\r\n      output += \"=\";\r\n      break;\r\n    default:\r\n      throw \"Illegal base64url string!\";\r\n  }\r\n\r\n  try {\r\n    return b64DecodeUnicode(output);\r\n  } catch (err) {\r\n    return atob(output);\r\n  }\r\n}\r\n","\"use strict\";\r\n\r\nimport base64_url_decode from \"./base64_url_decode\";\r\nimport { InvalidTokenError } from \"./errors\";\r\n\r\nexport function jwt_decode(token, options) {\r\n  if (typeof token !== \"string\") {\r\n    throw new InvalidTokenError(\"Invalid token specified\");\r\n  }\r\n\r\n  options = options || {};\r\n  var pos = options.header === true ? 0 : 1;\r\n  try {\r\n    return JSON.parse(base64_url_decode(token.split(\".\")[pos]));\r\n  } catch (e) {\r\n    throw new InvalidTokenError(\"Invalid token specified: \" + e.message);\r\n  }\r\n}\r\n\r\nexport * from \"./errors.mjs\";\r\n"],"names":["const","let"],"mappings":"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"}